{"version":3,"sources":["slider/Animator.js","slider/ScrollAnimator.js","slider/Slider.js","index.js"],"names":["Animator","mathFunctionObjects","addMathFunction","mathFunctionObject","func","maxFuncX","name","getAnimationFunction","funcName","getDecoratedFunction","bind","currentFunctionObject","maxFuncY","piece","x","easyEasy","Math","pow","quad","linear","ScrollAnimator","$scrollableElement","settings","console","log","animatedInMoment","funcsOnScrollEnd","subscribeOnScrollEnd","animationName","animationFunction","animationDuration","push","difference","animated","animateShift","duration","intervalDelay","times","start","scrollLeft","end","linearDx","currentOffset","interval","setInterval","setTimeout","clearInterval","forEach","require","Slider","$el","document","querySelector","selector","$content","$contentElems","querySelectorAll","scrollAnimator","scrollImmediately","index","numberOfStartElement","addEventListener","event","shiftContentCoefficient","wheelDelta","goToContentWithIndex","newIndex","length","currentContentElement","leftOfCurrent","getBoundingClientRect","left","newContentElement","leftOfNewElement","xShift","scrollShift","addScrollHandler","slider","window","s"],"mappings":";;AGAA;;AAEA,IAAM6E,MAAM,GAAG,IAAI5B,cAAJ,CAAW;AACtBI,EAAAA,QAAQ,EAAE,SADY;AAEtBO,EAAAA,oBAAoB,EAAE,CAFA;AAGtBhC,AFLJ,EEKIA,aAAa,EAAE,WAHO;AAItBE,EAAAA,iBAAiB,EAAE;AAJG,AHF1B,CGEe,CAAf;AAMAgD,AHPA,MGOM,CAACC,CAAP,GAAWF,MAAX;AHNA;AACA;AACA;AACO,IAAM7E,QAAQ,GAAG,SAAXA,QAAW,GAAM;AAE1B,eEPuBgD,OAAO,CAAC,kBAAD;AFQlC,IERQ5B,0BAAAA;AFSR;AACA;AACA,ICRaA;ADSb,ACRI,ICFS6B;AFWb,ACRA,ACFI;AFWJ,ACRA,ACFA;AFWA,ACRA,ACFA;AFWA,ACRA,ACFA;AFWA,ACRI,ACFA,oBAA0B,MDEd5B,kBAAZ,EAA+C;ADSnD,ACTmD,ACFrB;AFY9B;AACA,ACXmD,ACFrB,QDEMC,ACFpBA,QDEmC,ACFrB,uEDEiB,ACFrB,EDEyB,ACFrB;AFc9B;AAII,AChB+C,ACFrB,MFkBpBrB,mBAAmB,GAAG,EAA5B;;AAGA,ACnB+C,ACFrB,WFqBjBC,eAAT,CAAyBC,kBAAzB,EAA6C;AACzC,QAAMC,IAAI,GAAGD,kBAAkB,CAACC,IAAhC;AACA,ACpBAmB,ACFA,IDEAA,IDoBMlB,CEtBD6C,EDEE,CAAC1B,ACFR,GDEA,ACFW2B,CFsBG,ACpBF,GDoBKhD,IEtBE,CAACiD,aFsBe,AEtBxB,CFsByB/C,AEtBFiB,GDElC,KDoBA,AEtB0C,CAAC+B,QAAhC,CAAX;AFuBApD,ACpBA,ACFA,IFsBAA,KCpBKoB,ACFAiC,QAAL,GAAgB,GFsBG,CAACnD,CEtBC+C,EDErB,CCFgB,CAASE,CDEC/B,YDoBY,AEtBtB,CFsBuBf,AEtBA,IFsBpB,CAAnB,ACpBA,GDoB+C,SEtB/B,CAAhB;AFsBgDF,ACnBhD,ACFA,MFqBgDA,GCnB3CqB,ACFA8B,CFqB+C,EAAJnD,IAAD,MErB/C,GDEA,ACFqB,GDEG,ECFEkD,GDE1B,KCFqB,CAAcE,gBAAd,CAA+B,oBAA/B,CAArB;AFqBsDnD,AClBtD,ACDA,MFmBsDA,GClBjDqB,ACDA+B,KFmByD,EAARpD,OEnBtD,EDCA,CCDsB,EDCE,EAAxB,ACD0Be,cAAJ,CAAmB,KAAKkC,QAAxB,EAAkC;AFmBT,ACjB/C,ACDI1B,KFkBJ,CElBIA,GDCCD,UCDY,EAAEL,QDCnB,ACD2B,CDCD,ACDEM,YDCE,CCF0B;AFoB3D,ACjBOL,ACDAO,MDCAP,ACDAO,ODCO,CAACN,GAAR,CAAY,KAAZ,ACDiB,EAAEF,QAAQ,CAACQ;ADE/B,ACJuD,KDExD,ACFsB,CAAtB;AFsBJ,AChBI,ACDA,QDCMF,CCDD8B,EFiBAnD,UChBc,KCDnB,GAAyB,EFiB7B,CAA8BC,CEjBGY,OFiBjC,EAAwC,KEjBX,CAAmB,CDCtBE,ICD2BgC,IDCnB,CAAC1B,GCDN,EAAkC,QDCxC,yEAA6B,QAAhD;ADiBA,AChBA,ACDIE,MAAAA,GDCCD,EDgBEpB,YEjBc,EAAE,CDCvB,GAAyB,EDgBE,CAACD,QAAD,CAA3B,cChBoCD,oBAAX,CAAgCqB,aAAhC,CAAzB;ADiBH,ACfG,ACJ2D,KAAlC,CAAzB,GDIKE,iBAAL,4BAAyBR,QAAQ,CAACQ,iBAAlC,yEAAuD,GAAvD;AAEH,ACFG,SAAK6B,KAAL,GAAa,CAAb;AFgBJpD,AEfI,EFeJA,OEfSoD,KAAL,QFegB,GAAGpD,iBEfNe,GFe0B,CAACZ,IAArB,AEfE,CFewB,AEfvBkD,KFeH,CAAvB,cEfI,yEAA8C,CAA9C;;AFkBJ,AEhBI,WFgBKnD,oBAAT,CAA8BD,QAA9B,EAAwC;AACpC,AEhBH,QFgBSG,qBAAqB,GAAGV,SCZbG,MAAM,IDY0B,CAACI,QAAD,CAAjD;AACA,ACZA,QDYMJ,GCZDsB,CDYK,GAAGf,YCZb,CAAsBoB,IAAtB,CAA2B3B,GDYO,CAACA,ACZnC,IDYA;AACA,ACZH,QDYSC,QAAQ,GAAGM,qBAAqB,CAACN,QAAvC;AAEA,QAAMO,QAAQ,GAAGR,IAAI,CAACC,QAAD,CAArB;AAEA,WAAO,UAACQ,KAAD,EAAW,WEpBH;AFqBX,AErBW,gCDaPmB,YAAY;ADShB,ACRJ,UDQUlB,ACRP,CDQQ,GAAGD,CCRNoB,IDQW,GAAG5B,CCRnB,IAAiB2B,GDQhB,OCR0B,KAAK,CAAnC,EACI;ADQA,ACPJ,ACfA,WDeKE,ACfAoB,EFsBMlD,IAAI,CAACU,CAAD,AEtBf,CFsBW,AEtBG+C,GFsBOjD,ACPrB,CAAkBoB,ODOd,CAHc,CAGY,CCP9B,ECfA,CAA+B,YAA/B,EAA6C,UAAC8B,KAAD,EAAW;AFuBvD,ACPJ,ACfO,KFkBJ;AAKH,AEtBO,YAAMC,uBAAuB,GAAGD,KAAK,CAACE,UAAN,GAAmB,CAAnB,GAAuB,CAAvB,GAA2B,CAAC,CAA5D;AFwBR;AACJ,AEvBY,QAAA,KAAI,CAACC,mBDcAjC,CCdL,CAA0B,KAAI,CAAC2B,IDcd,CCdS,GAAaI,uBAAvC;AFwBZ,ACV6B;ADW7B,AExBY,eAAO,KAAP;AFyBZ,ACXQ,ACbC,OAND,GDmBM5B,QAAQ,GAAG,KAAKL,iBAAtB;ADYR,ACXQ,ACbH,UDaSM,aAAa,GAAG,EAAtB;ADYR,ACXQ,UAAMC,KAAK,GAAGF,QAAQ,GAAGC,aAAzB;AACA,WAAKX,gBAAL,GAAwB,IAAxB;AAEA,UAAMa,KAAK,GAAG,KAAKjB,kBAAL,CAAwBkB,UAAtC;ADYJ,ACXI,ACZJ,MFuBMxB,ICXIyB,GAAG,CDWC,ECXEF,CDWC,ICXI,GAAGN,UAApB;ADYA1B,ACXA,ACZR,IFuBQA,IAAI,EAAE,ACXAmC,QAAQ,GDUD,ACVIT,UAAU,GAAGK,KAA9B;ADYAjC,ACXA,ACZR,IFuBQA,IAAI,EAAE,ACXFsC,aAAa,CDWV5B,CAAD,CCXc,CDWP,ACXb;ADYI,ACVJ,ACbR,UDac6B,GDUK,KAAK,ACVF,GAAGC,CDUG5B,IAAI,CAACC,GAAL,CAAS,CCVD,CAAC,CDUT,EAAc,IAAEH,CAAhB,CAAT,CAAP,ECV8B;ADWjC,ACVG4B,KDMS,GCNTA,aAAa,IAAID,QAAjB,QCbayB,UAAU;AFwB3B7D,ACVI,ACbJ,IFuBAA,MEvBG6D,EFuBK,ACVArD,EDUE,GCVG,CCbF,EDaK6B,CCbF,CAAX,IAAgBwB,ODaU,CCbF,EDaKlC,ECbD,KAAKuB,GDahC,UCb2B,CAAmBY,MAAlD,EACI;AFiBS,ACJT,ACXJ,GFeJ,KCJQ,ECXD,GDWK,CAAC9C,CCXDoC,cAAL,CAAoBxB,EDWnB,CAAwBM,KCX5B,EACI,GDUA,GAAqCD,KAAK,GAAG,KAAI,CAACT,iBAAL,CAAuBhB,KAAvB,IAAgCmB,UAA7E;ADYR,ACXK,ACVD,MFqBEd,CCf0B,EAIzBkB,CDWG,AErBAgC,GFqBG,SCfmB,CAA5B,QCN2B,GAAG,KAAKb,aAAL,CAAmB,KAAKI,KAAxB,CAA9B;AFsBArD,ACVAuC,ACXA,IFqBAvC,ECVAuC,EDUI,EAAE,AErBAwB,MFoBG,ACTC,CAAC,MCXQ,GAAGD,GDWN,kBCX2B,CAACE,qBAAtB,GAA8CC,IAApE;AFsBAnE,ACVI0C,ACVJ,IFoBA1C,IAAI,ACVA0C,EDUE,AEpBA0B,WDUW,CAAC7B,EDUX7B,CAAD,EAAO,AEpBU,GDUN,ACVS,CDUtB,ICV2ByC,aAAL,CAAmBW,QAAnB,CAA1B;AFqBI,ACVA,ACVJ,QDUI,ECVEO,GFoBKzD,ACVH,CAACK,GDUM,CAACJ,GAAL,CAASH,CAAT,EAAY,CAAZ,AEpBW,CFoBlB,EEpBqB0D,GDUrB,CAAwBjC,UAAxB,GAAqCC,ACVC,CAAC8B,EDUvC,mBCVqB,GAA0CC,IAAnE;AFqBC,ACVG,ACTJ,KFeS,GCNL,ECTEG,GDSE,CAACjD,ECTG,GAAGgD,WDSX,GAAwB,ECTG,GDS3B,ACT8BJ,aAAlC;AFoBAhE,AElBA,IFkBAA,OElBKoD,CFkBG,EAAE,WElBV,CAAoBkB,WAApB,CAAgCD,MAAhC;AFaS,ACLL,ACNJ,GFWJ,QEXSf,KAAL,GAAaO,QAAb,IDMI,KAAI,0CAAJ,MAAA,KAAI;ADaZ,ACZK,ACNJ,MFkBK/C,CCjBQ,EAKPgB,GDYK,GAAG,ECjBD,CAAV;ADkBA7B,ACXH,IDWGA,IAAI,EAAE,QADK;AAEXF,IAAAA,IAAI,EAAE,cAACU,CAAD,EAAO;AACT,aAAOA,CAAP;AACH,KAJU,mBCvDA;AD4DXT,AC3DA,ID2DAA,QAAQ,CC3DD,CD2DG,IC3DEoB,gBAAZ;ADsDW,ACrDd,GDqDD;AAQAvB,EAAAA,eAAe,CAACgB,IAAD,CAAf;AACAhB,EAAAA,eAAe,CAACa,QAAD,CAAf,MEpDS;AFqDTb,AEpDI,EFoDJA,KEpDS0E,UFoDM,CAACzD,KEpDZ,CFoDW,CAAf;AAEA,AErDC,SFqDM;AACHZ,IAAAA,oBAAoB,EAApBA,oBADG;AAEHL,IAAAA,eAAe,EAAfA;AAFG,GAAP;AAIH,CA3FM,wDC4BkB;AACjB,OAAKwB,gBAAL,CAAsBqB,OAAtB,CAA+B,UAAC3C,IAAD,EAAU;AACrCA,IAAAA,IAAI;AACP,GAFD;AAGH","file":"_slider.e31bb0bc.js","sourceRoot":"..","sourcesContent":["/**\r\n *\r\n * @returns {{getAnimationFunction: (function(*=): function(*): *)}}\r\n * @constructor\r\n */\r\nexport const Animator = () => {\r\n\r\n    /*\r\n\r\n    after it will be: {\r\n        func-name-1: {\r\n            func: (x) => (x**2)\r\n            maxFuncX: any number\r\n        },\r\n        func-name-2: {\r\n            func: (x) => (x**3)\r\n            maxFuncX: any number\r\n        },\r\n        ....\r\n        etc\r\n    }\r\n\r\n    whats mean maxFuncX and func -> see comments of object structure below.\r\n\r\n     */\r\n    const mathFunctionObjects = {}\r\n\r\n\r\n    function addMathFunction(mathFunctionObject) {\r\n        const func = mathFunctionObject.func\r\n        const maxFuncX = mathFunctionObject.maxFuncX\r\n        mathFunctionObjects[mathFunctionObject.name] = {func, maxFuncX}\r\n    }\r\n\r\n    function getAnimationFunction(funcName) {\r\n        return getDecoratedFunction(funcName)\r\n    }\r\n    getAnimationFunction = getAnimationFunction.bind(this)\r\n\r\n\r\n    function getDecoratedFunction(funcName) {\r\n        const currentFunctionObject = mathFunctionObjects[funcName]\r\n        const func = currentFunctionObject.func\r\n        const maxFuncX = currentFunctionObject.maxFuncX\r\n\r\n        const maxFuncY = func(maxFuncX)\r\n\r\n        return (piece) => {\r\n            // piece - values from 0 to 1\r\n            const x = piece * maxFuncX\r\n            return func(x) / maxFuncY // values from 0 to 1\r\n        }\r\n    }\r\n\r\n    /*\r\n\r\n    Objects of math functions have structure:\r\n     -> name - string name, unique id for every function. The can get function by its name.\r\n     -> func - math function of 1 argument 'x'. It returns 'y'. Function must follow the next rule:\r\n               f(x2) > f(0), x2 - rightmost value of the considered scope of the given function definition.\r\n     -> maxFuncX - the rightmost value of the considered scope of the given function definition.\r\n\r\n     */\r\n\r\n    const easyEasy = {\r\n        name: 'easy-easy',\r\n        func: (x) => {\r\n            return 1 / (1 + Math.pow(2.7, 5-x))\r\n        },\r\n        maxFuncX: 10\r\n    }\r\n\r\n    const quad = {\r\n        name: 'quad',\r\n        func: (x) => {\r\n            return Math.pow(x, 5)\r\n        },\r\n        maxFuncX: 15\r\n    }\r\n\r\n    const linear = {\r\n        name: 'linear',\r\n        func: (x) => {\r\n            return x\r\n        },\r\n        maxFuncX: 15\r\n    }\r\n\r\n    addMathFunction(quad)\r\n    addMathFunction(easyEasy)\r\n    addMathFunction(linear)\r\n\r\n    return {\r\n        getAnimationFunction,\r\n        addMathFunction\r\n    }\r\n}","import {Animator} from \"./Animator\";\r\n\r\n\r\nexport class ScrollAnimator {\r\n    /**\r\n     *\r\n     * @param $scrollableElement - DOM object like div, ul, etc.\r\n     * @param {Object} settings - settings of animator.\r\n     */\r\n    constructor($scrollableElement, settings = {}) {\r\n        console.log(\"Created scroll animator\")\r\n        this.$scrollableElement = $scrollableElement\r\n        this.animatedInMoment = false\r\n        this.funcsOnScrollEnd = []\r\n        this.subscribeOnScrollEnd(()=>{\r\n            console.log(\"end\")\r\n        })\r\n\r\n        const animationName = settings.animationName ?? \"linear\"\r\n        this.animationFunction = Animator().getAnimationFunction(animationName)\r\n\r\n        this.animationDuration = settings.animationDuration ?? 600\r\n\r\n    }\r\n\r\n    get animated() {\r\n        return this.animatedInMoment\r\n    }\r\n\r\n    subscribeOnScrollEnd(func) {\r\n        this.funcsOnScrollEnd.push(func)\r\n    }\r\n\r\n    #notifyOnScrollEnd() {\r\n        this.funcsOnScrollEnd.forEach( (func) => {\r\n            func()\r\n        })\r\n    }\r\n\r\n\r\n    scrollShift(difference) {\r\n        if(this.animated || difference === 0)\r\n            return\r\n        this.animateShift(difference)\r\n    }\r\n\r\n    animateShift(difference) {\r\n        const duration = this.animationDuration\r\n        const intervalDelay = 10\r\n        const times = duration / intervalDelay\r\n        this.animatedInMoment = true\r\n\r\n        const start = this.$scrollableElement.scrollLeft\r\n        const end = start + difference\r\n        const linearDx = difference / times\r\n        let currentOffset = 0\r\n\r\n        const interval = setInterval(()=> {\r\n            currentOffset += linearDx\r\n            let piece = currentOffset / difference\r\n            this.$scrollableElement.scrollLeft = start + this.animationFunction(piece) * difference\r\n        }, intervalDelay)\r\n\r\n        setTimeout(()=> {\r\n            clearInterval(interval)\r\n            this.$scrollableElement.scrollLeft = end\r\n            this.animatedInMoment = false\r\n            this.#notifyOnScrollEnd()\r\n        }, duration)\r\n\r\n    }\r\n\r\n\r\n}","const { ScrollAnimator } = require('./ScrollAnimator')\r\n\r\nexport class Slider {\r\n    /**\r\n     *\r\n     * @param {object} settings\r\n     */\r\n    constructor(settings= {}) {\r\n        this.$el = document.querySelector(settings.selector)\r\n        this.$content = this.$el.querySelector('.slider-content')\r\n        this.$contentElems = this.$content.querySelectorAll('.slider-content-li')\r\n\r\n        this.scrollAnimator = new ScrollAnimator(this.$content, {\r\n            animationName: settings.animationName,\r\n            animationDuration: settings.animationDuration\r\n        })\r\n\r\n        this.scrollImmediately = new ScrollAnimator(this.$content, {\r\n            animationDuration: 0\r\n        })\r\n\r\n        this.index = 0\r\n        this.index = settings.numberOfStartElement ?? 0\r\n\r\n        this.#setup()\r\n    }\r\n\r\n    addScrollHandler() {\r\n        this.$content.addEventListener('mousewheel', (event) => {\r\n            // 1 - next, -1 - previous\r\n            const shiftContentCoefficient = event.wheelDelta < 0 ? 1 : -1\r\n\r\n            this.goToContentWithIndex(this.index + shiftContentCoefficient)\r\n            return false;\r\n        })\r\n    }\r\n\r\n    #setup() {\r\n        this.addScrollHandler()\r\n    }\r\n\r\n    /**\r\n     * go to element in <li> of <ul> in content.\r\n     * @param {number} newIndex - index of element. Starts with 0\r\n     */\r\n    goToContentWithIndex(newIndex) {\r\n        if(newIndex < 0 || newIndex >= this.$contentElems.length)\r\n            return\r\n\r\n        if(this.scrollAnimator.animated)\r\n            return\r\n        const currentContentElement = this.$contentElems[this.index]\r\n        const leftOfCurrent = currentContentElement.getBoundingClientRect().left\r\n\r\n        const newContentElement = this.$contentElems[newIndex]\r\n        const leftOfNewElement = newContentElement.getBoundingClientRect().left\r\n\r\n        const xShift = leftOfNewElement - leftOfCurrent\r\n\r\n        this.scrollAnimator.scrollShift(xShift)\r\n\r\n        this.index = newIndex\r\n    }\r\n}","import { Slider } from './slider/Slider'\r\n\r\nconst slider = new Slider({\r\n    selector: '.slider',\r\n    numberOfStartElement: 0,\r\n    animationName: 'easy-easy',\r\n    animationDuration: 200\r\n})\r\nwindow.s = slider"]}